---
title: "realtime"
output:
  rmarkdown::html_document:
    toc: false
    fig_caption: true
    self_contained: yes
fontsize: 11pt
documentclass: article
vignette: >
  %\VignetteIndexEntry{realtime}
  %\VignetteEngine{knitr::rmarkdown}
---

Here we will monitor the mood of Twitter using the _realtime R_ package. To run this on your computer, you will need to install the _rtweet_ and _sentimentr R_ packages to be installed. Also, you will need to create a `.Renviron` file in home directory that contains your twitter access keys.

```{r, eval = FALSE}
realtime(function() {
  # token registration
  token <- rtweet::create_token(
    app = Sys.getenv("TWITTER_APP_NAME"),
    consumer_key = Sys.getenv("TWITTER_CONSUMER_KEY"),
    consumer_secret = Sys.getenv("TWITTER_SECRET_KEY"))
  # tweet
  tweet <- rtweet::search_tweets("#auspol", n = 1, token = token)$text[1]
  # extract sentiment
  return(mean(sentimentr::sentiment(tweet)$sentiment))
}, title = "#auspol mood", ylim = c(-1, 1))
```
